---
title: cs143 编译原理
date: 2020-4-30 22:56
tags: 
categories: 
---

- 编译器结构
  1. 词法分析 (Lexical Analysis)
  2. 语法分析 (Parsing)
  3. 语义分析 (Semantic Analysis)
  4. 优化 (Optimization)
  5. 代码生成 (Code Generation)

早期的编译器和现在的编译器的对比：
<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927155639.png" width="550px">
</div>


现在的编译器花了更多的时间在优化上面

## 词法分析

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927160531.png" width="550px">
</div>


"Words" => "Tokens Class": **Identifier**, **keywords**, '**(**', '**)**', **numbers**, ...

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927160906.png" width="550px">
</div>


词法分析器将字符子串分类成Tokens，传递给**Parser**

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927161438.png" width="550px">
</div>


- Left-to-right scan => lookahead sometimes required 有时候需要向前几个字符参考，来确定当前的token

### 正则语言 Regular Languages

- Regular expressions

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927164524.png" width="300px">
</div>


**Epsilon**不是空集，是一个只包含空字符的集合

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927164758.png" width="550px">
</div>

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927165627.png" width="550px">
</div>


grammar: 文法

- Regular expressions (syntax) specify regular languages (set of strings)

### 形式化语言 Formal Languages

- **Def.** Let $\sum$ be a set of characters (an alphabet). 

  A **language** over $\sum$ is a set of strings of characters drawn from $\sum$

- Meaning function $L$ maps **syntax** to **semantics** $L: Exp\rightarrow Sets\ of\ Strings$

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927172527.png" width="550px">
</div>

- Meaning is many to one
  - Never one to many!

### Lexical Specifications

- $AA^*=A^+$

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927232010.png" width="550px">
</div>

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927232447.png" width="550px">
</div>

最后一个表示补集

- 如何预测一个s是不是属于L(R)

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927232857.png" width="550px">
</div>

写出所有类型token的正则表达式

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927232923.png" width="550px">
</div>

构建R，R能匹配所有类型的token

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200927234514.png" width="550px">
</div>

检查前缀是不是属于R，如果属于R，则一定属于R中的某个token类Rj，删除匹配完成的前缀接着进行第三步

**一些问题**：

1. 当较短和较长的字符串都匹配时，选较长的  "Maximal Match"

2. 当同一个字符串和多个正则表达式匹配时，根据优先级

3. What if no rule matches? 添加一个错误类，优先级设置成最低

### 有限自动机

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200928001815.png" width="550px">
</div>

有限自动机是一种算法的实现

<div align='center'>
  <img src="https://cdn.jsdelivr.net/gh/LittleMeepo/blog_images/images/cs143/20200928002027.png" width="550px">
</div>
- 在一个状态，读取一些输入，变成另一个状态
- 如果读完输入，最后处于接受状态，则accept，否则就reject

